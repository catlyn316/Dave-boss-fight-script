-- åŸºæœ¬æœå‹™èˆ‡ç©å®¶
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer
local TeleportService = game:GetService("TeleportService")


-- GUI ä¸»é«”
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "MaolingHub"

-- ä¿®æ­£ï¼šä¸»æ¡†æ¶æ¨£å¼
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 450, 0, 350)
Frame.Position = UDim2.new(0.5, -225, 0.5, -175)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true

-- æ·»åŠ æ¼¸å±¤æ•ˆæœ
local gradient = Instance.new("UIGradient", Frame)
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 35)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(35, 35, 50))
}
gradient.Rotation = 45

-- æ·»åŠ å¤–ç™¼å…‰æ•ˆæœ
local stroke = Instance.new("UIStroke", Frame)
stroke.Color = Color3.fromRGB(100, 150, 255)
stroke.Thickness = 2
stroke.Transparency = 0.5

Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 15)

-- ä¿®æ­£ï¼šæ¨™é¡Œæ¨£å¼
local Title = Instance.new("TextLabel", Frame)
Title.Size = UDim2.new(1, -80, 0, 50)
Title.Position = UDim2.new(0, 15, 0, 0)  -- å¾€ä¸Šç§»å‹•5åƒç´ åŸç‚º5
Title.BackgroundTransparency = 1
Title.Text = "âœ¨ è²“ç²çš„è…³æœ¬å€ âœ¨"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 22
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left

-- æ·»åŠ æ¨™é¡Œç™¼å…‰æ•ˆæœ
local titleStroke = Instance.new("UIStroke", Title)
titleStroke.Color = Color3.fromRGB(100, 150, 255)
titleStroke.Thickness = 1
titleStroke.Transparency = 0.3

-- ä¿®æ­£ï¼šé—œé–‰æŒ‰éˆ•æ¨£å¼å’ŒåŠŸèƒ½
local Close = Instance.new("TextButton", Frame)
Close.Size = UDim2.new(0, 35, 0, 35)
Close.Position = UDim2.new(1, -40, 0, 8)
Close.Text = "x"
Close.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.Font = Enum.Font.GothamBold
Close.TextSize = 18
Close.BorderSizePixel = 0

-- æ·»åŠ é—œé–‰æŒ‰éˆ•æ•ˆæœ
local closeGradient = Instance.new("UIGradient", Close)
closeGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(220, 60, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(180, 40, 40))
}

Instance.new("UICorner", Close).CornerRadius = UDim.new(0, 8)

-- ç•¶è…³æœ¬GUIé—œé–‰æ™‚ä¹Ÿæ¸…ç†PointLighté€£æ¥
Close.MouseButton1Click:Connect(function()
    -- æ¸…ç†æ‰€æœ‰é€£æ¥
    if autoBombConnection then
        autoBombConnection:Disconnect()
        autoBombConnection = nil
    end
    if extendGloveConnection then
        extendGloveConnection:Disconnect()
        extendGloveConnection = nil
    end
    if bombThrowConnection then
        bombThrowConnection:Disconnect()
        bombThrowConnection = nil
    end
    if pointLightConnection then
        pointLightConnection:Disconnect()
        pointLightConnection = nil
    end
    
    ScreenGui:Destroy()
    _G.maolingHubLoaded = false -- é‡ç½®è¼‰å…¥ç‹€æ…‹
end)

-- ä¿®æ­£ï¼šæœ€å°åŒ–æŒ‰éˆ•æ¨£å¼
local Minimize = Instance.new("TextButton", Frame)
Minimize.Size = UDim2.new(0, 35, 0, 35)
Minimize.Position = UDim2.new(1, -80, 0, 8)
Minimize.Text = "â”€"
Minimize.BackgroundColor3 = Color3.fromRGB(100, 100, 120)
Minimize.TextColor3 = Color3.fromRGB(255, 255, 255)
Minimize.Font = Enum.Font.GothamBold
Minimize.TextSize = 16
Minimize.BorderSizePixel = 0

local minimizeGradient = Instance.new("UIGradient", Minimize)
minimizeGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 100, 120)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 80, 100))
}

Instance.new("UICorner", Minimize).CornerRadius = UDim.new(0, 8)

-- ä¿®æ­£ï¼šå´é‚Šæ¬„ç‚ºå¯æ»¾å‹•
local SideBar = Instance.new("ScrollingFrame", Frame)
SideBar.Size = UDim2.new(0, 130, 1, -55)
SideBar.Position = UDim2.new(0, 5, 0, 50)
SideBar.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
SideBar.BorderSizePixel = 0
SideBar.ScrollBarThickness = 6
SideBar.CanvasSize = UDim2.new(0, 0, 0, 200)
SideBar.AutomaticCanvasSize = Enum.AutomaticSize.Y
SideBar.ScrollingDirection = Enum.ScrollingDirection.Y

-- æ·»åŠ å´é‚Šæ¬„æ¨£å¼
local sidebarGradient = Instance.new("UIGradient", SideBar)
sidebarGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 50)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(45, 45, 65))
}

Instance.new("UICorner", SideBar).CornerRadius = UDim.new(0, 10)

-- æ·»åŠ UIListLayoutåˆ°å´é‚Šæ¬„
local sidebarLayout = Instance.new("UIListLayout", SideBar)
sidebarLayout.Padding = UDim.new(0, 8)
sidebarLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- ä¿®æ­£ï¼šå…§å®¹å€åŸŸ
local Content = Instance.new("Frame", Frame)
Content.Size = UDim2.new(1, -145, 1, -55)
Content.Position = UDim2.new(0, 140, 0, 50)
Content.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
Content.BorderSizePixel = 0

local contentGradient = Instance.new("UIGradient", Content)
contentGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(50, 50, 75))
}

Instance.new("UICorner", Content).CornerRadius = UDim.new(0, 10)

-- ä¿®æ­£ï¼šç¸®å°åŠŸèƒ½çš„å°ºå¯¸
local isMinimized = false
local fullSize = UDim2.new(0, 450, 0, 350)
local miniSize = UDim2.new(0, 450, 0, 50)

Minimize.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    SideBar.Visible = not isMinimized
    Content.Visible = not isMinimized
    Frame.Size = isMinimized and miniSize or fullSize
end)

-- ä¿®æ­£ï¼šç°¡å–®é«˜äº®æ–‡å­—çš„åˆ†å€æŒ‰éˆ•æ¨£å¼
local function createSectionButton(text, order, parent)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, 120, 0, 45)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(85, 85, 105)  -- æ¯”åŸæœ¬æ›´äº®çš„èƒŒæ™¯
    
    -- æœ€äº®çš„æ–‡å­—è¨­å®š
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- ç´”ç™½è‰²
    btn.TextTransparency = 0  -- å®Œå…¨ä¸é€æ˜
    btn.Font = Enum.Font.GothamBold  -- ç²—é«”å­—
    btn.TextSize = 16  -- é©ä¸­å¤§å°
    btn.BorderSizePixel = 0
    
    -- æ·»åŠ åœ“è§’
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)
    
    -- ç°¡åŒ–æé‚Š
    local btnStroke = Instance.new("UIStroke", btn)
    btnStroke.Color = Color3.fromRGB(150, 180, 255)
    btnStroke.Thickness = 1
    btnStroke.Transparency = 0.6
    
    -- ç°¡å–®hoveræ•ˆæœ
    btn.MouseEnter:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(105, 105, 125)  -- hoveræ™‚æ›´äº®
        btnStroke.Transparency = 0.3
    end)
    
    btn.MouseLeave:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(85, 85, 105)
        btnStroke.Transparency = 0.6
    end)
    
    return btn
end

-- ä¿®æ­£ï¼šç°¡å–®é«˜äº®æ–‡å­—çš„ä¸€èˆ¬æŒ‰éˆ•æ¨£å¼
local function createButton(text, order, parent, spacing)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, 180, 0, 35)
    btn.Position = UDim2.new(0.5, -90, 0, 10 + (order - 1) * spacing)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)  -- æ¯”åŸæœ¬æ›´äº®çš„èƒŒæ™¯
    
    -- æœ€äº®çš„æ–‡å­—è¨­å®š
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- ç´”ç™½è‰²
    btn.TextSize = 16  -- é©ä¸­å¤§å°
    btn.Font = Enum.Font.GothamBold  -- ç²—é«”å­—
    btn.BorderSizePixel = 0
    
    -- æ·»åŠ åœ“è§’
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    
    -- ç°¡åŒ–æé‚Š
    local btnStroke = Instance.new("UIStroke", btn)
    btnStroke.Color = Color3.fromRGB(120, 170, 255)
    btnStroke.Thickness = 1
    btnStroke.Transparency = 0.6
    
    -- ç°¡å–®hoveræ•ˆæœ
    btn.MouseEnter:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(100, 160, 240)  -- hoveræ™‚æ›´äº®
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- ä¿æŒç´”ç™½
        btnStroke.Transparency = 0.3
    end)
    
    btn.MouseLeave:Connect(function()
        btn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)  -- ä¿æŒç´”ç™½
        btnStroke.Transparency = 0.6
    end)
    
    return btn
end

-- æ·»åŠ æ»¾å‹•æ¡†æ¨£å¼æ”¹å–„
local function styleScrollFrame(scrollFrame)
    scrollFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
    scrollFrame.BorderSizePixel = 0
    scrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
    
    local scrollGradient = Instance.new("UIGradient", scrollFrame)
    scrollGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(45, 45, 65)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(55, 55, 80))
    }
    
    Instance.new("UICorner", scrollFrame).CornerRadius = UDim.new(0, 8)
end

-- ç•¶è…³æœ¬é–‹å•Ÿå¾Œï¼ŒæŒçºŒåµæ¸¬ä¸¦èª¿æ•´PointLight
local pointLightConnection = nil

-- èª¿æ•´PointLightçš„å‡½æ•¸
local function adjustPointLight()
    pcall(function()
        local characters = Workspace:FindFirstChild("Characters")
        if characters then
            local playerCharacter = characters:FindFirstChild(LocalPlayer.Name)
            if playerCharacter then
                local lantern = playerCharacter:FindFirstChild("Lantern")
                if lantern then
                    local handle = lantern:FindFirstChild("Handle")
                    if handle then
                        local fire = handle:FindFirstChild("Fire")
                        if fire then
                            local pointLight = fire:FindFirstChild("PointLight")
                            if pointLight and pointLight:IsA("PointLight") then
                                -- è¨­ç½®PointLightå±¬æ€§
                                pointLight.Brightness = 5
                                pointLight.Range = 60
                                pointLight.Shadows = false
                            end
                        end
                    end
                end
            end
        end
    end)
end

-- é–‹å§‹æŒçºŒåµæ¸¬PointLight
pointLightConnection = game:GetService("RunService").Heartbeat:Connect(function()
    adjustPointLight()
end)

-- é‚ªæƒ¡å·´è¥¿åˆ†å€
local EvilBrazilButton = createSectionButton("ğŸ‡§ğŸ‡· é‚ªæƒ¡å·´è¥¿", 1, SideBar)

-- é‚ªæƒ¡å·´è¥¿å…§å®¹æ¡†æ¶
local EvilBrazilContent = Instance.new("ScrollingFrame", Content)
EvilBrazilContent.Size = UDim2.new(1, -10, 1, -10)
EvilBrazilContent.Position = UDim2.new(0, 5, 0, 5)
EvilBrazilContent.CanvasSize = UDim2.new(0, 0, 0, 300)
EvilBrazilContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
EvilBrazilContent.ScrollBarThickness = 6
EvilBrazilContent.Visible = true
styleScrollFrame(EvilBrazilContent)

-- æ·»åŠ å…§å®¹å€åŸŸå¸ƒå±€
local contentLayout = Instance.new("UIListLayout", EvilBrazilContent)
contentLayout.Padding = UDim.new(0, 10)
contentLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
contentLayout.VerticalAlignment = Enum.VerticalAlignment.Top

-- é‚ªæƒ¡å·´è¥¿åŠŸèƒ½æŒ‰éˆ•
-- 1. å‚³é€åˆ°Bossæˆ°
local TeleportToBossBtn = createButton("ğŸ’€ å‚³é€åˆ°é‚ªæƒ¡å·´è¥¿", 1, EvilBrazilContent, 45)
TeleportToBossBtn.MouseButton1Click:Connect(function()
    pcall(function()
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            local targetPortal = Workspace:FindFirstChild("Evil Barzil")
            if targetPortal then
                targetPortal = targetPortal:FindFirstChild("evilbarzil")
                if targetPortal then
                    targetPortal = targetPortal:FindFirstChild("portal")
                    if targetPortal then
                        character.HumanoidRootPart.CFrame = targetPortal.CFrame
                    end
                end
            end
        end
    end)
end)

-- 2. è·³éç¬¬ä¸€é—œ
local SkipFirstLevelBtn = createButton("âš¡ è·³éç¬¬ä¸€é—œ", 2, EvilBrazilContent, 45)
SkipFirstLevelBtn.MouseButton1Click:Connect(function()
    pcall(function()
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            -- ç¬¬ä¸€æ­¥ï¼šå‚³é€åˆ°Spotlight
            local spotlight = Workspace:FindFirstChild("Spotlight")
            if spotlight then
                character.HumanoidRootPart.CFrame = spotlight.CFrame
                
                -- ç­‰å¾…0.5ç§’
                wait(0.5)
                
                -- ç¬¬äºŒæ­¥ï¼šå‚³é€åˆ°GateMechanism.Touchpad
                local gateMechanism = Workspace:FindFirstChild("GateMechanism")
                if gateMechanism then
                    local touchpad = gateMechanism:FindFirstChild("Touchpad")
                    if touchpad then
                        character.HumanoidRootPart.CFrame = touchpad.CFrame
                        
                        -- ç­‰å¾…2ç§’
                        wait(2)
                        
                        -- ç¬¬ä¸‰æ­¥ï¼šå‚³é€åˆ°TheOutside.TowerENT1.teleport
                        local theOutside = Workspace:FindFirstChild("TheOutside")
                        if theOutside then
                            local towerENT1 = theOutside:FindFirstChild("TowerENT1")
                            if towerENT1 then
                                local teleport = towerENT1:FindFirstChild("teleport")
                                if teleport then
                                    character.HumanoidRootPart.CFrame = teleport.CFrame
                                end
                            end
                        end
                    end
                end
            end
        end
    end)
end)

-- 3. è§£é›»æ¢¯
local UnlockElevatorBtn = createButton("è§£é›»æ¢¯(å¥½åƒæ²’ç”¨)", 3, EvilBrazilContent, 45)
UnlockElevatorBtn.MouseButton1Click:Connect(function()
    pcall(function()
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then

            
            -- ç¬¬ä¸€æ­¥ï¼šå‚³é€åˆ°Screwdriverä¸¦åŸ·è¡ŒProximityPrompt
            local screwdriver = Workspace:FindFirstChild("Screwdriver")
            if screwdriver then
                character.HumanoidRootPart.CFrame = screwdriver.CFrame
                local proximityPrompt = screwdriver:FindFirstChild("ProximityPrompt")
                if proximityPrompt then
                    fireproximityprompt(proximityPrompt)
                end
            end
            
            -- ç¬¬äºŒæ­¥ï¼šå‚³é€åˆ°ElevatorHatchä¸¦åŸ·è¡ŒProximityPrompt
            local openableDoors = Workspace:FindFirstChild("OpenableDoors")
            if openableDoors then
                local elevatorHatch = openableDoors:FindFirstChild("ElevatorHatch")
                if elevatorHatch then
                    character.HumanoidRootPart.CFrame = elevatorHatch.CFrame
                    local promptHolder = elevatorHatch:FindFirstChild("PromptHolder")
                    if promptHolder then
                        local proximityPrompt = promptHolder:FindFirstChild("ProximityPrompt")
                        if proximityPrompt then
                            fireproximityprompt(proximityPrompt)
                        end
                    end
                end
            end
            
            -- ç¬¬ä¸‰æ­¥ï¼šé»æ“ŠboltClick
            local clickable = Workspace:FindFirstChild("Clickable")
            if clickable then
                local boltClick = clickable:FindFirstChild("boltClick")
                if boltClick then
                    local clickDetector = boltClick:FindFirstChild("ClickDetector")
                    if clickDetector then
                        fireclickdetector(clickDetector)
                    end
                end
            end
        end
    end)
end)

-- 4. å»¶é•·æ‰‹å¥— (ä¿®æ”¹å¾Œçš„æŒ‰éˆ•)
local ExtendGloveBtn = createButton("ğŸ§¤ å»¶é•·æ‰‹å¥—", 4, EvilBrazilContent, 45)
local isExtendGloveOn = false
local extendGloveConnection = nil

ExtendGloveBtn.MouseButton1Click:Connect(function()
    pcall(function()
        isExtendGloveOn = not isExtendGloveOn
        
        if isExtendGloveOn then
            -- é–‹å•Ÿæ¨¡å¼ï¼šé–‹å§‹ç›£æ§ä¸¦ä¿®æ”¹Lanternä½ç½®
            ExtendGloveBtn.Text = "ğŸ§¤ å»¶é•·æ‰‹å¥— (ON)"
            ExtendGloveBtn.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
            
            -- æ¯0.1ç§’æª¢æŸ¥ä¸€æ¬¡
            extendGloveConnection = game:GetService("RunService").Heartbeat:Connect(function()
                -- æŸ¥æ‰¾ workspace.Characters.[ç©å®¶åç¨±].Lantern
                local characters = Workspace:FindFirstChild("Characters")
                if characters then
                    local playerCharacter = characters:FindFirstChild(LocalPlayer.Name)
                    if playerCharacter then
                        local lantern = playerCharacter:FindFirstChild("Lantern")
                        if lantern then
                            -- å˜—è©¦ä¸åŒçš„å¯èƒ½è·¯å¾‘
                            local transform = lantern:FindFirstChild("Transform")
                            if transform then
                                local grip = transform:FindFirstChild("Grip")
                                if grip then
                                    -- å˜—è©¦å¤šç¨®å¯èƒ½çš„å±¬æ€§åç¨±
                                    if grip:FindFirstChild("Position") then
                                        grip.Position.Y = -12
                                    elseif grip.Position then
                                        local pos = grip.Position
                                        grip.Position = Vector3.new(pos.X, -12, pos.Z)
                                    end
                                    
                                    -- å˜—è©¦ç›´æ¥ä¿®æ”¹Yå±¬æ€§
                                    if grip:FindFirstChild("Y") then
                                        grip.Y = -12
                                    end
                                end
                            end
                            
                            -- å¦‚æœæ˜¯Toolå°è±¡ï¼Œå˜—è©¦ä¿®æ”¹GripPos
                            if lantern:IsA("Tool") then
                                local currentGrip = lantern.GripPos
                                lantern.GripPos = Vector3.new(currentGrip.X, -12, currentGrip.Z)
                            end
                            
                            -- å˜—è©¦æŸ¥æ‰¾Handleä¸¦ä¿®æ”¹å…¶å±¬æ€§
                            local handle = lantern:FindFirstChild("Handle")
                            if handle then
                                -- ä¿®æ”¹Handleçš„ç›¸é—œå±¬æ€§
                                if handle:FindFirstChild("Position") then
                                    local pos = handle.Position
                                    handle.Position = Vector3.new(pos.X, pos.Y - 12, pos.Z)
                                end
                            end
                        end
                    end
                end
            end)
            
        else
            -- é—œé–‰æ¨¡å¼ - å°‡Yå€¼æ”¹å›-1.1
            ExtendGloveBtn.Text = "ğŸ§¤ å»¶é•·æ‰‹å¥—"
            ExtendGloveBtn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
            
            -- åœ¨æ–·é–‹é€£æ¥å‰ï¼Œå…ˆå°‡Yå€¼æ”¹å›-1.1
            pcall(function()
                local characters = Workspace:FindFirstChild("Characters")
                if characters then
                    local playerCharacter = characters:FindFirstChild(LocalPlayer.Name)
                    if playerCharacter then
                        local lantern = playerCharacter:FindFirstChild("Lantern")
                        if lantern then
                            -- å˜—è©¦ä¸åŒçš„å¯èƒ½è·¯å¾‘ï¼Œå°‡Yå€¼æ”¹å›-1.1
                            local transform = lantern:FindFirstChild("Transform")
                            if transform then
                                local grip = transform:FindFirstChild("Grip")
                                if grip then
                                    -- å˜—è©¦å¤šç¨®å¯èƒ½çš„å±¬æ€§åç¨±
                                    if grip:FindFirstChild("Position") then
                                        grip.Position.Y = -1.1
                                    elseif grip.Position then
                                        local pos = grip.Position
                                        grip.Position = Vector3.new(pos.X, -1.1, pos.Z)
                                    end
                                    
                                    -- å˜—è©¦ç›´æ¥ä¿®æ”¹Yå±¬æ€§
                                    if grip:FindFirstChild("Y") then
                                        grip.Y = -1.1
                                    end
                                end
                            end
                            
                            -- å¦‚æœæ˜¯Toolå°è±¡ï¼Œå˜—è©¦ä¿®æ”¹GripPos
                            if lantern:IsA("Tool") then
                                local currentGrip = lantern.GripPos
                                lantern.GripPos = Vector3.new(currentGrip.X, -1.1, currentGrip.Z)
                            end
                            
                            -- å˜—è©¦æŸ¥æ‰¾Handleä¸¦ä¿®æ”¹å…¶å±¬æ€§
                            local handle = lantern:FindFirstChild("Handle")
                            if handle then
                                -- ä¿®æ”¹Handleçš„ç›¸é—œå±¬æ€§
                                if handle:FindFirstChild("Position") then
                                    local pos = handle.Position
                                    handle.Position = Vector3.new(pos.X, pos.Y + 10.9, pos.Z) -- å¾-12å›åˆ°-1.1ï¼Œå·®è·ç‚º10.9
                                end
                            end
                        end
                    end
                end
            end)
            
            -- æ–·é–‹ç›£æ§é€£æ¥
            if extendGloveConnection then
                extendGloveConnection:Disconnect()
                extendGloveConnection = nil
            end
        end
    end)
end)

-- 5. å‚³é€åˆ°çµ‚é»
local TeleportToEndBtn = createButton("ğŸ¯ å‚³é€åˆ°çµ‚é»", 5, EvilBrazilContent, 45)
TeleportToEndBtn.MouseButton1Click:Connect(function()
    pcall(function()
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") and character:FindFirstChild("Humanoid") then
            -- å‚³é€åˆ°çµ‚é»çš„ç¬¬5å€‹å­ç‰©ä»¶
            local diceCatch = Workspace:FindFirstChild("DiceCatch")
            if diceCatch then
                local children = diceCatch:GetChildren()
                if children[5] then
                    character.HumanoidRootPart.CFrame = children[5].CFrame
                end
            end
            
            -- æŒçºŒå›ºå®šç©å®¶é€Ÿåº¦ç‚º55å’Œè·³èºåŠ›85
            local humanoid = character.Humanoid
            
            -- å‰µå»ºé€£æ¥ä¾†æŒçºŒç›£æ§ä¸¦å›ºå®šæ•¸å€¼
            local speedConnection
            local jumpConnection
            
            speedConnection = humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
                if humanoid.WalkSpeed ~= 55 then
                    humanoid.WalkSpeed = 55
                end
            end)
            
            jumpConnection = humanoid:GetPropertyChangedSignal("JumpPower"):Connect(function()
                if humanoid.JumpPower ~= 85 then
                    humanoid.JumpPower = 85
                end
            end)
            
            -- åˆå§‹è¨­å®š
            humanoid.WalkSpeed = 55
            humanoid.JumpPower = 85
            
            -- ç•¶è§’è‰²é‡ç”Ÿæ™‚æ¸…ç†é€£æ¥
            humanoid.Died:Connect(function()
                if speedConnection then speedConnection:Disconnect() end
                if jumpConnection then jumpConnection:Disconnect() end
            end)
            
            -- åœ¨è…³ä¸‹å‰µå»ºå¹³å°
            local platform = Instance.new("Part")
            platform.Name = "EndPlatform"
            platform.Size = Vector3.new(5000, 5, 5000)
            platform.Material = Enum.Material.Plastic
            platform.BrickColor = BrickColor.new("Medium stone grey")
            platform.Anchored = true
            platform.CanCollide = true
            
            -- è¨­å®šå¹³å°ä½ç½®åœ¨ç©å®¶è…³ä¸‹
            local playerPosition = character.HumanoidRootPart.Position
            local originalY = playerPosition.Y - 7.5
            platform.Position = Vector3.new(playerPosition.X, originalY, playerPosition.Z)
            
            -- å„²å­˜åŸå§‹Yä½ç½®ä¾›å¾ŒçºŒä½¿ç”¨
            platform:SetAttribute("OriginalY", originalY)
            
            platform.Parent = Workspace
        end
    end)
end)

-- 6. è‡ªå‹•æ‹¿/æ”¾ç‚¸å½ˆï¼ˆå¯é–‹é—œï¼‰- è‡ªå‹•è§¸ç™¼ProximityPrompt
local AutoBombBtn = createButton("ğŸ’£ è‡ªå‹•æ‹¿/æ”¾ç‚¸å½ˆ", 6, EvilBrazilContent, 45)
local isAutoBombOn = false
local autoBombConnection = nil

-- ç²å–ç©å®¶æ”åƒæ©Ÿ
local Camera = game.Workspace.CurrentCamera

-- è‡ªå‹•è§¸ç™¼å¯è¦‹ProximityPromptçš„å‡½æ•¸
local function autoTriggerProximityPrompts()
    pcall(function()
        local character = LocalPlayer.Character
        if not character or not character:FindFirstChild("HumanoidRootPart") then
            return
        end
        
        -- éæ­¸æŸ¥æ‰¾æ‰€æœ‰ProximityPrompt
        local function findProximityPrompts(obj)
            local prompts = {}
            
            for _, child in pairs(obj:GetChildren()) do
                if child:IsA("ProximityPrompt") then
                    table.insert(prompts, child)
                end
                
                -- éæ­¸æŸ¥æ‰¾å­ç‰©ä»¶
                local childPrompts = findProximityPrompts(child)
                for _, prompt in pairs(childPrompts) do
                    table.insert(prompts, prompt)
                end
            end
            
            return prompts
        end
        
        -- ç²å–æ‰€æœ‰ProximityPrompt
        local allPrompts = findProximityPrompts(Workspace)
        
        for _, prompt in pairs(allPrompts) do
            -- æª¢æŸ¥ProximityPromptæ˜¯å¦å•Ÿç”¨ä¸”çˆ¶ç‰©ä»¶å­˜åœ¨
            if prompt.Enabled and prompt.Parent then
                local promptPart = prompt.Parent
                
                -- æª¢æŸ¥æ˜¯å¦åœ¨ç¯„åœå…§
                if promptPart:IsA("BasePart") then
                    local distance = (character.HumanoidRootPart.Position - promptPart.Position).Magnitude
                    
                    -- å¦‚æœåœ¨è§¸ç™¼ç¯„åœå…§ï¼Œè‡ªå‹•è§¸ç™¼
                    if distance <= prompt.MaxActivationDistance then
                        -- æª¢æŸ¥æ˜¯å¦åœ¨è¦–è§’ç¯„åœå…§ï¼ˆç°¡å–®çš„å‰æ–¹æª¢æ¸¬ï¼‰
                        local directionToPrompt = (promptPart.Position - character.HumanoidRootPart.Position).Unit
                        local lookDirection = character.HumanoidRootPart.CFrame.LookVector
                        local dotProduct = directionToPrompt:Dot(lookDirection)
                        
                        -- å¦‚æœå¤§è‡´åœ¨å‰æ–¹ï¼ˆè§’åº¦å°æ–¼90åº¦ï¼‰
                        if dotProduct > 0 then
                            fireproximityprompt(prompt)
                        end
                    end
                end
            end
        end
    end)
end

AutoBombBtn.MouseButton1Click:Connect(function()
    pcall(function()
        isAutoBombOn = not isAutoBombOn
        
        if isAutoBombOn then
            -- é–‹å•Ÿæ¨¡å¼ï¼šé–‹å§‹è‡ªå‹•è§¸ç™¼ProximityPrompt
            AutoBombBtn.Text = "ğŸ’£ è‡ªå‹•æ‹¿/æ”¾ç‚¸å½ˆ (ON)"
            AutoBombBtn.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
            
            -- æ¯0.1ç§’æª¢æŸ¥ä¸€æ¬¡
            autoBombConnection = game:GetService("RunService").Heartbeat:Connect(function()
                autoTriggerProximityPrompts()
            end)
            
        else
            -- é—œé–‰æ¨¡å¼
            AutoBombBtn.Text = "ğŸ’£ è‡ªå‹•æ‹¿/æ”¾ç‚¸å½ˆ"
            AutoBombBtn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
            
            -- æ–·é–‹è‡ªå‹•è§¸ç™¼é€£æ¥
            if autoBombConnection then
                autoBombConnection:Disconnect()
                autoBombConnection = nil
            end
        end
    end)
end)

-- 7. ä¸Ÿç‚¸å½ˆæ™‚ç”¨ï¼ˆå¯é–‹é—œï¼‰- å›ºå®šé«˜åº¦5ç§’å¾Œç§»å‹•åˆ°å¹³å°
local BombThrowBtn = createButton("ğŸ’¥ ä¸Ÿç‚¸å½ˆæ™‚ç”¨", 7, EvilBrazilContent, 45)
local isBombThrowOn = false
local bombThrowConnection = nil
local bombPlatform = nil
local heightFixTimer = nil

BombThrowBtn.MouseButton1Click:Connect(function()
    pcall(function()
        local character = LocalPlayer.Character
        
        if character and character:FindFirstChild("HumanoidRootPart") then
            isBombThrowOn = not isBombThrowOn
            
            if isBombThrowOn then
                -- é–‹å•Ÿæ¨¡å¼ï¼šå›ºå®šé«˜åº¦5570ä¸¦å‰µå»ºå¹³å°
                BombThrowBtn.Text = "ğŸ’¥ ä¸Ÿç‚¸å½ˆæ™‚ç”¨ (ON)"
                BombThrowBtn.BackgroundColor3 = Color3.fromRGB(60, 180, 60)
                
                -- å‰µå»ºå¹³å°
                bombPlatform = Instance.new("Part")
                bombPlatform.Name = "BombPlatform"
                bombPlatform.Size = Vector3.new(5000, 5, 5000)
                bombPlatform.Material = Enum.Material.Plastic
                bombPlatform.BrickColor = BrickColor.new("Medium stone grey")
                bombPlatform.Anchored = true
                bombPlatform.CanCollide = true
                
                -- è¨­å®šå¹³å°ä½ç½®åœ¨é«˜åº¦5570-7.5çš„ä½ç½®
                local playerPosition = character.HumanoidRootPart.Position
                bombPlatform.Position = Vector3.new(playerPosition.X, 5570 - 7.5, playerPosition.Z)
                bombPlatform.Parent = Workspace
                
                -- å°‡ç©å®¶å‚³é€åˆ°é«˜åº¦5570
                local currentPos = character.HumanoidRootPart.Position
                character.HumanoidRootPart.CFrame = CFrame.new(
                    Vector3.new(currentPos.X, 5570, currentPos.Z),
                    character.HumanoidRootPart.CFrame.LookVector
                )
                
                -- è¨˜éŒ„é–‹å§‹æ™‚é–“å’Œå›ºå®šç‹€æ…‹
                local startTime = tick()
                local isHeightFixed = true
                
                -- å‰µå»ºé€£æ¥ä¾†è™•ç†é«˜åº¦å›ºå®šå’Œå¹³å°è·Ÿéš¨
                bombThrowConnection = game:GetService("RunService").Heartbeat:Connect(function()
                    if character and character:FindFirstChild("HumanoidRootPart") and character.Parent then
                        local currentTime = tick()
                        local currentPosition = character.HumanoidRootPart.Position
                        
                        -- å‰0.5ç§’å›ºå®šç©å®¶é«˜åº¦åœ¨5570
                        if isHeightFixed and (currentTime - startTime) < 0.5 then
                            if math.abs(currentPosition.Y - 5570) > 0.1 then
                                character.HumanoidRootPart.CFrame = CFrame.new(
                                    Vector3.new(currentPosition.X, 5570, currentPosition.Z),
                                    character.HumanoidRootPart.CFrame.LookVector
                                )
                            end
                        elseif isHeightFixed and (currentTime - startTime) >= 0.5 then
                            -- 0.5ç§’å¾Œè§£é™¤é«˜åº¦å›ºå®šï¼Œå°‡ç©å®¶ç§»å‹•åˆ°å¹³å°ä¸Š
                            isHeightFixed = false
                            if bombPlatform and bombPlatform.Parent then
                                local platformTop = bombPlatform.Position.Y + (bombPlatform.Size.Y / 2) + 3
                                character.HumanoidRootPart.CFrame = CFrame.new(
                                    Vector3.new(currentPosition.X, platformTop, currentPosition.Z),
                                    character.HumanoidRootPart.CFrame.LookVector
                                )
                            end
                        end
                        
                        -- å¹³å°å§‹çµ‚è·Ÿéš¨ç©å®¶XZä½ç½®
                        if bombPlatform and bombPlatform.Parent then
                            local expectedPlatformPos = Vector3.new(currentPosition.X, 5570 - 7.5, currentPosition.Z)
                            if (bombPlatform.Position - expectedPlatformPos).Magnitude > 0.1 then
                                bombPlatform.Position = expectedPlatformPos
                            end
                        end
                    end
                end)
                
            else
                -- é—œé–‰æ¨¡å¼
                BombThrowBtn.Text = "ğŸ’¥ ä¸Ÿç‚¸å½ˆæ™‚ç”¨"
                BombThrowBtn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
                
                -- æ–·é–‹é«˜åº¦å›ºå®šé€£æ¥
                if bombThrowConnection then
                    bombThrowConnection:Disconnect()
                    bombThrowConnection = nil
                end
                
                -- ç§»é™¤å¹³å°
                if bombPlatform and bombPlatform.Parent then
                    bombPlatform:Destroy()
                    bombPlatform = nil
                end
            end
        end
    end)
end)

-- ç•¶ç©å®¶é›¢é–‹éŠæˆ²æ™‚æ¸…ç†æ‰€æœ‰é€£æ¥
game.Players.PlayerRemoving:Connect(function(player)
    if player == LocalPlayer then
        if autoBombConnection then
            autoBombConnection:Disconnect()
            autoBombConnection = nil
        end
        if extendGloveConnection then
            extendGloveConnection:Disconnect()
            extendGloveConnection = nil
        end
        if bombThrowConnection then
            bombThrowConnection:Disconnect()
            bombThrowConnection = nil
        end
        if pointLightConnection then
            pointLightConnection:Disconnect()
            pointLightConnection = nil
        end
    end
end)

-- ç•¶è§’è‰²é‡ç”Ÿæ™‚é‡ç½®æ‰€æœ‰ç‹€æ…‹
LocalPlayer.CharacterRemoving:Connect(function()
    -- æ¸…ç†è‡ªå‹•æ‹¿æ”¾ç‚¸å½ˆé€£æ¥
    if autoBombConnection then
        autoBombConnection:Disconnect()
        autoBombConnection = nil
    end
    isAutoBombOn = false
    AutoBombBtn.Text = "ğŸ’£ è‡ªå‹•æ‹¿/æ”¾ç‚¸å½ˆ"
    AutoBombBtn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
    
    -- æ¸…ç†å»¶é•·æ‰‹å¥—é€£æ¥
    if extendGloveConnection then
        extendGloveConnection:Disconnect()
        extendGloveConnection = nil
    end
    isExtendGloveOn = false
    ExtendGloveBtn.Text = "ğŸ§¤ å»¶é•·æ‰‹å¥—"
    ExtendGloveBtn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
    
    -- æ¸…ç†ä¸Ÿç‚¸å½ˆé€£æ¥å’Œå¹³å°
    if bombThrowConnection then
        bombThrowConnection:Disconnect()
        bombThrowConnection = nil
    end
    if bombPlatform and bombPlatform.Parent then
        bombPlatform:Destroy()
        bombPlatform = nil
    end
    isBombThrowOn = false
    BombThrowBtn.Text = "ğŸ’¥ ä¸Ÿç‚¸å½ˆæ™‚ç”¨"
    BombThrowBtn.BackgroundColor3 = Color3.fromRGB(80, 140, 220)
    
    -- é‡æ–°é–‹å§‹PointLightåµæ¸¬ï¼ˆå› ç‚ºæ–°è§’è‰²å¯èƒ½æœƒæœ‰æ–°çš„Lanternï¼‰
    if pointLightConnection then
        pointLightConnection:Disconnect()
    end
    pointLightConnection = game:GetService("RunService").Heartbeat:Connect(function()
        adjustPointLight()
    end)
end)

-- åˆ†å€åˆ‡æ›åŠŸèƒ½
local currentContent = nil

local function showContent(content)
    if currentContent then
        currentContent.Visible = false
    end
    content.Visible = true
    currentContent = content
end

-- é‚ªæƒ¡å·´è¥¿æŒ‰éˆ•é»æ“Šäº‹ä»¶
EvilBrazilButton.MouseButton1Click:Connect(function()
    showContent(EvilBrazilContent)
end)
